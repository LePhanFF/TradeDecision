# **NinjaDataExport Prompt V1**

**Title:** NinjaDataExport – CSV Market Exporter for NinjaTrader 8

**Purpose:**
This indicator automatically exports **OHLCV and key indicators** from NinjaTrader 8 charts into a CSV file (for later AI/ML analysis, TPO/ICT processing, journaling). It must be **lightweight, thread-safe, and non-blocking** to avoid freezing the UI.

**Core Rules:**

1. **Export frequency:** On every **completed bar** (default `OnBarClose`).
2. **Data included:**

   * Time (`yyyy-MM-dd HH:mm:ss`)
   * Open, High, Low, Close, Volume
   * VWAP, EMA20, EMA50, ATR14, RSI14
3. **File handling:**

   * Writes to `Documents/NinjaTrader 8/Exports/MarketExport.csv` by default.
   * Auto-creates file and header row if missing.
   * Uses UTF-8 encoding.
   * Thread-safe writes (`using StreamWriter` on each append).
4. **Duplication guard:** Only one line per bar (`lastBarTime` check).
5. **Resilience:** Catch exceptions on write, log via `Print()`.
6. **Extensibility:**

   * Allow `ExportFolder` and `FileName` as user properties.
   * Optional: switch between **single timeframe file** vs **separate files per timeframe**.

**Sample Output (CSV row):**

```
2025-09-26 09:30:00,5185.25,5192.75,5180.00,5188.50,3421,5187.00,5186.75,5185.90,12.5,54.3
```

**Use Cases:**

* Daily AI sync (e.g., push to OpenAI File Search or S3 each morning).
* Feeding into Python scripts for TPO/ICT analysis.
* Journaling and backtesting.

---

**Prompt usage (in project):**

> *“Show me the latest NinjaDataExport code”* → Returns the current C# file (CsvMarketExporter.cs).
> *“Update NinjaDataExport to add MACD”* → Returns updated version with MACD added.
> *“Make NinjaDataExport export both 5-min and 15-min into separate CSVs”* → Returns extended version.

